#! /bin/bash

PROG=( "$@" )

_run() {
    local exp=$1
    local res
    shift
    
    res=`"${PROG[@]}" "$@"` || return $?

    test x"$exp" = x"$res" || {
	echo "mismatch: got '$res', expected '$exp' for '$*'" >&2
	return 1
    }

    return 0
}

_run 'ff010000000000008000000000000000' 'ff01::' '63' '1' '2' raw
_run 'ff010000000000008000000000000000' 'ff01::' '64' '1' '1' raw
_run 'ff010000000000004000000000000000' 'ff01::' '64' '1' '2' raw
_run 'ff010000000000004000000000000000' 'ff01::' '64' '1' '2' raw

_run 'ff010000000000800000000000000000' 'ff01::' '56' '1' '1' raw
_run 'ff010000000000400000000000000000' 'ff01::' '56' '1' '2' raw
_run 'ff010000000000200000000000000000' 'ff01::' '56' '1' '3' raw
_run 'ff010000000000100000000000000000' 'ff01::' '56' '1' '4' raw
_run 'ff010000000000080000000000000000' 'ff01::' '56' '1' '5' raw
_run 'ff010000000000040000000000000000' 'ff01::' '56' '1' '6' raw
_run 'ff010000000000020000000000000000' 'ff01::' '56' '1' '7' raw
_run 'ff010000000000010000000000000000' 'ff01::' '56' '1' '8' raw
_run 'ff010000000000008000000000000000' 'ff01::' '56' '1' '9' raw
